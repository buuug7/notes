# vue 相关面试题

## Vue 双向绑定数据的原理

使用的是发布-订阅的模式，通过 Object.defineProperty() 来劫持各个属性的 setter，getter，在数据变动时发布消息给订阅者，触发相应监听回调。

## Vue 中 key 的作用

key 是给每一个 VNODE 的唯一 id,依靠 key,我们的 diff 操作可以更准确、更快速

## Vue 组件 data 为什么必须是函数

因为 js 本身的特性带来的，如果 data 是一个对象，那么由于对象本身属于引用类型，当我们修改其中的一个属性时，会影响到所有 Vue 实例的数据。如果将 data 作为一个函数返回一个对象，那么每一个实例的 data 属性都是独立的，不会相互影响了

## Vue 生命周期

在创建一个 Vue 实例直到最后销毁会经历以下几个阶段：

- 第一步是初始化，该阶段的主要工作是初始化事件，设定数据监听等。同时在 Vue 实例创建前调用`beforeCreate`钩子函数，创建完成之后调用`created`钩子函数。
- 第二步是挂载，在挂载之前会判断`el`跟`template`选项是否存在并做不同的操作，最后编译模板。同时在挂载前会调用`beforeMount`钩子函数,在挂载完成之后会调用`mounted`钩子函数。挂载的主要工作为创建虚拟 DOM 并替换`el`。
- 第三步就是 Vue 实例正常运行阶段，在该阶段当数据变动的时候重新渲染虚拟 DOM。同时在该阶段会调用`beforeUpdate`和`updated`钩子函数，前者在虚拟 DOM 重新渲染之前调用，后者在重新渲染完成之后调用。
- 最后一步就是当调用 Vue 实例的`$destroy`方法的时候，Vue 做相应的清除工作，比如销毁监听器以及子组件的监听器等。同时在该阶段会调用`beforeDestory`和`destroyed`钩子函数。


## $nextTick 是做什么的

$nextTick 是在下次 DOM 更新循环结束之后执行延迟回调，在修改数据之后使用 $nextTick，则可以在回调中获取更新后的 DOM

## 什么是虚拟 DOM

虚拟 DOM (vdom)是真实 DOM 在内存中的表示,vdom 是虚拟 DOM（Virtual DOM）的简称，指的是用 JS 模拟的 DOM 结构，将 DOM 变化的对比放在 JS 层来做。换句话说，vdom 就是 JS 对象。然后根据这个对象构建出真实 DOM 树，插入到文档中。

虚拟 DOM 的优点：

- 减少 DOM 的操作，虚拟 dom 可以将多次操作合并为一次操作，减少 DOM 操作的次数

DOM diff：

DOM diff 是两个虚拟 DOM 树对比的算法：diff 算法仅在两个树的同级的虚拟节点之间做比较，递归地进行比较，最终实现整个 DOM 树的更新。diff 算法的三个步骤：

- 用 JS 对象的方式来表示 DOM 树的结构，然后根据这个对象构建出真实的 DOM 树，插到文档中
- 当状态变化的时候，重新构造一棵新的对象树。然后用新的树和旧的树进行比较，记录两棵树的差异
- 最后把所记录的差异应用到所构建的真正的 DOM 树上，这样就完成了一次视图更新
