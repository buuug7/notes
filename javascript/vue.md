# vue 相关面试题

## Vue 双向绑定数据的原理

使用的是发布-订阅的模式，通过 Object.defineProperty() 来劫持各个属性的 setter，getter，在数据变动时发布消息给订阅者，触发相应监听回调。

## Vue 中 key 的作用

key 是给每一个 VNODE 的唯一 id,依靠 key,我们的 diff 操作可以更准确、更快速

## Vue 组件 data 为什么必须是函数

因为 js 本身的特性带来的，如果 data 是一个对象，那么由于对象本身属于引用类型，当我们修改其中的一个属性时，会影响到所有 Vue 实例的数据。如果将 data 作为一个函数返回一个对象，那么每一个实例的 data 属性都是独立的，不会相互影响了

## Vue 生命周期

在创建一个 Vue 实例直到最后销毁会经历以下几个阶段：

- 第一步是初始化，该阶段的主要工作是初始化事件，设定数据监听等。同时在 Vue 实例创建前调用`beforeCreate`钩子函数，创建完成之后调用`created`钩子函数。
- 第二步是挂载，在挂载之前会判断`el`跟`template`选项是否存在并做不同的操作，最后编译模板。同时在挂载前会调用`beforeMount`钩子函数,在挂载完成之后会调用`mounted`钩子函数。挂载的主要工作为创建虚拟 DOM 并替换`el`。
- 第三步就是 Vue 实例正常运行阶段，在该阶段当数据变动的时候重新渲染虚拟 DOM。同时在该阶段会调用`beforeUpdate`和`updated`钩子函数，前者在虚拟 DOM 重新渲染之前调用，后者在重新渲染完成之后调用。
- 最后一步就是当调用 Vue 实例的`$destroy`方法的时候，Vue 做相应的清除工作，比如销毁监听器以及子组件的监听器等。同时在该阶段会调用`beforeDestory`和`destroyed`钩子函数。
